<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BDProject.Views.HomePage"
             xmlns:local="clr-namespace:BDProject.ViewModels">
    
    <ContentPage.Content>

        <Grid RowDefinitions="auto,*">

            <Grid 
                Grid.Row="0"
                Padding="8,0"
                ColumnDefinitions="*,auto">

                <Entry
                    Grid.Column="0"
                    Text="{Binding Search}"
                    Placeholder="Search" />

                <Button 
                    Grid.Column="1"
                    HeightRequest="46"
                    WidthRequest="58"
                    Text=""
                    FontSize="Large"
                    FontFamily="FA-S"/>

            </Grid>

            <CollectionView 
                Grid.Row="1"
                x:Name="PostsCollectionView"
                ItemsSource="{Binding PostsCollection}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>

                        <Grid 
                            Padding="8,16"
                            RowDefinitions="auto,*,auto">

                            <StackLayout
                                Grid.Row="0"
                                Orientation="Horizontal">

                                <!--<Image Source="Profile"/>-->
                                <Button 
                                    HeightRequest="46"
                                    WidthRequest="46"
                                    Text=""
                                    FontSize="Large"
                                    FontFamily="FA-R"/>

                                <Label 
                                    VerticalOptions="Center"
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    Text="{Binding Username, Source={
                                        RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                    }}" />

                            </StackLayout>

                            <Grid
                                Grid.Row="1"
                                ColumnDefinitions="*,auto">

                                <!--<Image Source="Post Image/Video"/>-->
                                <Button
                                    HeightRequest="200"
                                    Grid.Column="0"
                                    Text="Post"/>

                                <StackLayout
                                    VerticalOptions="Center"
                                    HorizontalOptions="Center"
                                    Grid.Column="1"
                                    Orientation="Vertical">

                                    <Button 
                                        HeightRequest="46"
                                        WidthRequest="46"
                                        Text=""
                                        FontSize="Large"
                                        FontFamily="FA-R"
                                        Command="{Binding LikePostItemCommand, Source={
                                            RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                        }}"
                                        CommandParameter="{Binding .}"/>

                                    <Label 
                                        FontSize="Large"
                                        HorizontalOptions="Center"
                                        Text="{Binding LikesCount, Source={
                                            RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                        }}" />

                                    <Button 
                                        HeightRequest="46"
                                        WidthRequest="46"
                                        Text="" 
                                        FontSize="Large"
                                        FontFamily="FA-R"
                                        Command="{Binding OpenPostCommentsItemCommand, Source={
                                            RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                        }}"
                                        CommandParameter="{Binding .}"/>

                                    <Label 
                                        FontSize="Large"
                                        HorizontalOptions="Center"
                                        Text="{Binding CommentsCount, Source={
                                            RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                        }}" />

                                </StackLayout>

                            </Grid>

                            <StackLayout
                                Grid.Row="2"
                                Orientation="Vertical">

                                <Label 
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    Text="{Binding Username, Source={
                                        RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                    }}" />

                                <Label 
                                    FontSize="Medium"
                                    Text="{Binding PostDescription, Source={
                                        RelativeSource AncestorType={x:Type local:HomePageViewModel}
                                    }}" />

                            </StackLayout>

                        </Grid>

                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>
        
    </ContentPage.Content>
</ContentPage>